using <stdlib.h>::{ free }
using <stdio.h>::{ printf }

using zxhttp::{ RequestOptions, Response }
using zxhttp as http

fn main() -> int {
  new+4096 res = http::head(RequestOptions { url: "https://example.com" });
  let mut headers = res.headers.iterator();

  while !headers.ended {
    let header = headers.next();
    if 0 != header->value {
      static_attest(safe(header->value));
      printf("%s", header->value);
    }
  }

  let mut string = res.to_cstr();
  printf("%s", string);
  free(string);

  res.destroy();

  return 0;
}
